<div class="p-6 bg-gray-50 min-h-screen">
  <h1 class="text-3xl font-bold mb-6 text-gray-800">Admin Dashboard</h1>

  <!-- Dropdown -->
  <div class="mb-6">
    <label for="section" class="block text-sm font-medium text-gray-700 mb-2">
      Select Section
    </label>
    <select id="section" (change)="onSelect($event)"
      class="w-64 rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-700 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
      <option value="">-- Choose an option --</option>
      <option value="users">Users</option>
      <option value="products">Products</option>
      <option value="orders">Orders</option>
    </select>
  </div>

  @switch (selectedSection) {
  @case ('users') {
  <section class="bg-white rounded-xl shadow-md p-5">
    <h2 class="text-2xl font-semibold mb-4 text-indigo-600">Users</h2>
    @if (users.length) {
    <ul class="divide-y divide-gray-200">
      @for (user of users; track user._id) {
      <li class="py-3 flex justify-between items-center">
        <div>
          <span class="font-medium text-gray-800">{{ user.name }}</span>
          <span class="ml-2 text-gray-500">{{ user.email }}</span>
        </div>
        <div class="flex gap-2">
          <button class="px-3 py-1 text-sm bg-yellow-500 text-white rounded hover:bg-yellow-600"
            (click)="startEdit(user)">
            Edit
          </button>
          <button class="px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700"
            (click)="deleteUser(user._id)">
            Delete
          </button>
        </div>
      </li>
      }
    </ul>
    } @else {
    <p class="text-gray-500 italic">No users found.</p>
    }
  </section>
  }
  @case ('products') {
  <section class="bg-white rounded-xl shadow-md p-5">
    <h2 class="text-2xl font-semibold mb-4 text-indigo-600">Products</h2>
    @if (products.length) {
    <ul class="divide-y divide-gray-200">
      @for (product of products; track product._id) {
      <li class="py-3 flex justify-between items-center">
        <div>
          <span class="font-medium text-gray-800">{{ product.name }}</span>
          <span class="ml-3 text-green-600 font-semibold">
            ${{ product.price }}
          </span>
        </div>
        <button class="px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700"
          (click)="deleteProduct(product._id)">
          Delete
        </button>
      </li>
      }
    </ul>
    } @else {
    <p class="text-gray-500 italic">No products found.</p>
    }
  </section>
  }

  @case ('orders') {
  <section class="bg-white rounded-xl shadow-md p-5">
    <h2 class="text-2xl font-semibold mb-4 text-indigo-600">Orders</h2>
    @if (orders.length) {
    <ul class="divide-y divide-gray-200">
      @for (order of orders; track order._id) {
      <li class="py-3 flex justify-between">
        <span class="font-medium text-gray-800">
          Order #{{ order._id }}
        </span>
        <span class="text-gray-600">Total: ${{ order.totalPrice }}</span>
 <div class="flex items-center gap-3">
        <span class="px-3 py-1 rounded-full text-sm font-medium"
              [ngClass]="{
                'bg-yellow-200 text-yellow-800': order.status === 'Pending',
                'bg-blue-200 text-blue-800': order.status === 'Processing',
                'bg-purple-200 text-purple-800': order.status === 'Shipped',
                'bg-green-200 text-green-800': order.status === 'Delivered',
                'bg-red-200 text-red-800': order.status === 'Cancelled'
              }">
          {{ order.status }}
        </span>

        <select
          [ngModel]="order.status"
          (ngModelChange)="updateOrderStatus(order, $event)"
          class="border rounded px-2 py-1"
        >
          <option *ngFor="let status of orderStatuses" [value]="status">
            {{ status }}
          </option>
        </select>
      </div>
      </li>
      }
    </ul>
    } @else {
    <p class="text-gray-500 italic">No orders found.</p>
    }
  </section>
  }
  @default {
  <p class="text-gray-500">
    Please select a section from the dropdown.
  </p>
  }
  }

  <!-- Edit modal -->
  @if (editingUser) {
  <div class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center">
    <div class="bg-white p-6 rounded-lg w-96 shadow-lg">
      <h3 class="text-xl font-semibold mb-4">Edit User</h3>

      <label class="block mb-2 text-sm">Name</label>
      <input [(ngModel)]="editingUser.name" class="w-full border px-2 py-1 mb-3 rounded" />

      <label class="block mb-2 text-sm">Email</label>
      <input [(ngModel)]="editingUser.email" class="w-full border px-2 py-1 mb-3 rounded" />

      <div class="flex justify-end gap-2">
        <button class="px-3 py-1 bg-gray-400 text-white rounded" (click)="cancelEdit()">Cancel</button>
        <button class="px-3 py-1 bg-green-600 text-white rounded" (click)="saveUser()">Save</button>
      </div>
    </div>
  </div>
  }
</div>
