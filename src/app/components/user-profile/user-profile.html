<div class="container mx-auto p-4">
  <div class="bg-white rounded shadow-lg p-6">
    <div class="flex justify-between items-center mb-4">
      <h1 class="text-2xl font-bold">Your Profile</h1>
      <div>
        <button (click)="setView('view')" [class.active]="currentView === 'view'" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-l">
          View Profile
        </button>
        <button (click)="setView('edit')" [class.active]="currentView === 'edit'" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4">
          Edit Profile
        </button>
        <button (click)="setView('changePassword')" [class.active]="currentView === 'changePassword'" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-r">
          Change Password
        </button>
      </div>
    </div>

    @if(currentView === 'view' && profile)
    {
      <div>
      <h2 class="text-xl font-semibold mb-2">Profile Information</h2>
      <p><strong>Name:</strong> {{ profile.name }}</p>
      <p><strong>Email:</strong> {{ profile.email }}</p>
    </div>
    }

    @if(currentView === 'edit' && userForEdit)
    {
      <div>
      <h2 class="text-xl font-semibold mb-2">Edit Profile</h2>
      <form (ngSubmit)="updateProfile()">
        <div class="mb-4">
          <label class="block text-gray-700 text-sm font-bold mb-2" for="name">
            Name
          </label>
          <input [(ngModel)]="userForEdit.name" name="name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="name" type="text">
        </div>
        <div class="mb-6">
          <label class="block text-gray-700 text-sm font-bold mb-2" for="email">
            Email
          </label>
          <input [(ngModel)]="userForEdit.email" name="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="email" type="email">
        </div>
        <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
          Update Profile
        </button>
      </form>
    </div>
  }
     @if(currentView === 'changePassword')
    {
      <div class="mt-6">
      <h2 class="text-xl font-semibold mb-2">Change Password</h2>
      <form (ngSubmit)="changePassword()">
        <div class="mb-4">
          <label class="block text-gray-700 text-sm font-bold mb-2" for="currentPassword">
            Current Password
          </label>
          <input type="password" [(ngModel)]="currentPassword" name="currentPassword" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="currentPassword">
        </div>
        <div class="mb-6">
          <label class="block text-gray-700 text-sm font-bold mb-2" for="newPassword">
            New Password
          </label>
          <input type="password" [(ngModel)]="newPassword" name="newPassword" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="newPassword">
        </div>
        <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
          Update Password
        </button>
      </form>
      @if(message)
      {
        <p class="mt-3 text-green-600">{{ message }}</p>
      }
      @if(error)
      {
        <p class="mt-3 text-red-600">{{ error }}</p>
      }
    </div>
  }

    <div class="mt-8">
      <h2 class="text-xl font-semibold mb-2 text-red-600">Delete Account</h2>
      <p class="text-gray-600 mb-4">Once you delete your account, there is no going back. Please be certain.</p>
      <button (click)="deleteProfile()" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
        Delete My Account
      </button>
    </div>

  </div>
</div>
